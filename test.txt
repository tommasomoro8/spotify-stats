(async () => {
                let myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");

                const result = await fetch('/friends/invited-by-list', {
                    method: 'GET',
                    headers: myHeaders,
                    redirect: "follow",
                })

                if (result.status != 200) {
                    console.log("errore")
                    console.log(await result.text())
                } else {
                    const resultJ = await result.json()
                    console.log(resultJ)

                    if (resultJ.length > 0)
                        document.getElementById("friend-invited-by-list").innerHTML = ""
                    else
                        document.getElementById("friend-invited-by-list").innerHTML = "vuoto"


                    for (let i = 0; i < resultJ.length; i++) {
                        let div = document.createElement("div")
                        div.classList.add("row")

                            let name = document.createElement("div")
                            name.innerText = resultJ[i].display_name + " (" + resultJ[i].id + ")"
                            div.appendChild(name)

                            let accept_button = document.createElement("button")
                            accept_button.innerText = "Accetta"
                            accept_button.addEventListener("click", async () => {
                                const result = await fetch('${process.env.URL}friends/invite-accept/' + resultJ[i].id, {
                                    method: 'POST',
                                    headers: myHeaders,
                                    redirect: "follow",
                                })

                                if (result.status != 200) {
                                    console.log("errore")
                                    return console.log(await result.text())
                                }

                                console.log(await result.text())
                            })
                            div.appendChild(accept_button)

                            let decline_button = document.createElement("button")
                            decline_button.innerText = "Rifiuta"
                            decline_button.addEventListener("click", async () => {
                                const result = await fetch('${process.env.URL}friends/invite-decline/' + resultJ[i].id, {
                                    method: 'POST',
                                    headers: myHeaders,
                                    redirect: "follow",
                                })

                                if (result.status != 200) {
                                    console.log("errore")
                                    return console.log(await result.text())
                                }

                                console.log(await result.text())
                            })
                            div.appendChild(decline_button)

                        document.getElementById("friend-invited-by-list").appendChild(div)
                    }
                }
            })();

            (async () => {
                let myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");

                const result = await fetch('/friends/invited-list', {
                    method: 'GET',
                    headers: myHeaders,
                    redirect: "follow",
                })

                if (result.status != 200) {
                    console.log("errore")
                    console.log(await result.text())
                } else {
                    const resultJ = await result.json()
                    console.log(resultJ)

                    if (resultJ.length > 0)
                        document.getElementById("friend-invited-list").innerHTML = ""
                    else
                        document.getElementById("friend-invited-list").innerHTML = "vuoto"


                    
                }
            })();


            (async () => {
                let myHeaders = new Headers();
                myHeaders.append("Content-Type", "application/json");
                myHeaders.append("Authorization", "Bearer  ${access_token}");

                const result = await fetch('https://api.spotify.com/v1/me/player/recently-played?limit=30', {
                    method: 'GET',
                    headers: myHeaders,
                    redirect: "follow",
                })

                if (result.status != 200) {
                    console.log("errore")
                    console.log(await result.text())
                } else {
                    const resultJ = await result.json()
                    console.log(resultJ)
                }
            })()